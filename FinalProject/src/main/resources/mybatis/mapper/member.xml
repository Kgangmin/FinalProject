<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spring.app.member.model.MemberDAO">

  <!-- 컬럼명 == DTO 프로퍼티명(소문자)로 매핑 -->
  <resultMap id="MemberMap" type="com.spring.app.member.domain.MemberDTO">
    <id     property="emp_no"               column="EMP_NO"/>
    <result property="emp_pwd"              column="EMP_PWD"/>
    <result property="emp_name"             column="EMP_NAME"/>
    <result property="fk_rank_no"           column="FK_RANK_NO"/>
    <result property="fk_dept_no"           column="FK_DEPT_NO"/>
    <result property="email"                column="EMAIL"/>
    <result property="phone_num"            column="PHONE_NUM"/>
    <result property="birthday"             column="BIRTHDAY"/>
    <result property="emp_account"          column="EMP_ACCOUNT"/>
    <result property="emp_bank"             column="EMP_BANK"/>
    <result property="hiredate"             column="HIREDATE"/>
    <result property="resigndate"           column="RESIGNDATE"/>
    <result property="emp_status"           column="EMP_STATUS"/>
    <result property="emp_origin_filename"  column="EMP_ORIGIN_FILENAME"/>
    <result property="emp_save_filename"    column="EMP_SAVE_FILENAME"/>
    <result property="emp_filesize"         column="EMP_FILESIZE"/>
  </resultMap>

  <!-- 로그인용 단건 조회
       - DATE/NUMBER를 String으로 받으므로 TO_CHAR로 포맷 통일(원하면 유지 가능) -->
  <select id="selectMemberByEmpNo" parameterType="string" resultMap="MemberMap">
    SELECT
      EMP_NO,
      EMP_PWD,
      EMP_NAME,
      FK_RANK_NO,
      FK_DEPT_NO,
      EMAIL,
      PHONE_NUM,
      TO_CHAR(BIRTHDAY, 'YYYY-MM-DD') AS BIRTHDAY,
      EMP_ACCOUNT,
      EMP_BANK,
      TO_CHAR(HIREDATE, 'YYYY-MM-DD') AS HIREDATE,
      TO_CHAR(RESIGNDATE, 'YYYY-MM-DD') AS RESIGNDATE,
      EMP_STATUS,
      EMP_ORIGIN_FILENAME,
      EMP_SAVE_FILENAME,
      TO_CHAR(NVL(EMP_FILESIZE,0)) AS EMP_FILESIZE
    FROM TBL_EMPLOYEE
    WHERE EMP_NO = #{empNo}
  </select>

</mapper>
