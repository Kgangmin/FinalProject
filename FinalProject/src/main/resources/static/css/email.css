/* =========================================================
   메일 화면 공통 레이아웃 변수
   - header.jsp / menu.jsp / mail_sidebar.jsp의 고정값과 연동
   ========================================================= */
body.mail-page {
  --topbar-h: 70px;   /* 상단 헤더 높이 */
  --menu-w:   170px;  /* 좌측 앱 공용 사이드바 너비 (menu.jsp) */
  --mail-w:   200px;  /* 메일 전용 사이드바 너비 (mail_sidebar.jsp) */
}

/* =========================================================
   기본 여백 초기화 (메일 화면 전용)
   - 상단 여백/패딩 제거해서 상단바와 촘촘하게 붙임
   ========================================================= */
body.mail-page {
  margin: 0;
}
body.mail-page .container,
body.mail-page .container-fluid {
  margin-top: 0 !important;
  padding-top: 0 !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* =========================================================
   메일 전체 래퍼
   - 좌우 간격 제거 및 카드들 사이 틈(gap) 제거
   ========================================================= */
body.mail-page .mail-wrap {
  display: flex;
  gap: 0 !important;
  margin: 0 !important;
}

/* ===========================
   메일 상세 화면 전용 레이아웃
   - 목록화면과 동일한 높이/배치
   - 페이지 스크롤은 숨기고, 카드 내부에서만 스크롤
   =========================== */
html,
body.mail-page.mail-detail {
  height: 100%;
}
body.mail-page.mail-detail {
  overflow: hidden;   /* 페이지 전체 스크롤 감춤 */
  margin: 0;
}

/* 우측 본문 패널을 뷰포트에 고정(상단바와 공백 없이) */
body.mail-page.mail-detail .mail-wrap section.flex-grow-1 {
  position: fixed;
  top: var(--topbar-h);
  left: calc(var(--menu-w) + var(--mail-w));
  right: 0;
  bottom: 0;
  overflow: hidden;    /* 바깥쪽 스크롤 감춤 */
}

/* 카드가 고정 영역을 꽉 채우고, 본문(card-body)에서만 스크롤 */
body.mail-page.mail-detail .mail-card {
  height: 100%;
  display: flex;
  flex-direction: column;
  margin: 0 !important;
  border-left: 0 !important;
}
body.mail-page.mail-detail .card-header {
  flex: 0 0 auto; /* 헤더는 고정 높이 */
}
body.mail-page.mail-detail .card-body {
  flex: 1 1 auto;    /* 남은 영역 채우기 */
  overflow: auto;    /* 내용이 길면 여기서 스크롤바 생성 */
}


/* =========================================================
   메일 전용 사이드바 (좌측 고정)
   - 앱 공용 메뉴 오른쪽에 바로 붙고, 상단바 아래부터 화면 높이 채움
   - 내부 스크롤 허용(폴더 목록/필터 많을 때)
   ========================================================= */
body.mail-page .mail-sidebar {
  position: fixed;
  top: var(--topbar-h);                         /* 상단바 바로 아래 */
  left: var(--menu-w);                          /* 앱 공용 메뉴 바로 오른쪽 */
  width: var(--mail-w);
  height: calc(100vh - var(--topbar-h));        /* 헤더 제외한 높이 */
  background: #fff;
  border-right: 1px solid #e9ecef;
  overflow-y: auto;                              /* 사이드바 자체 스크롤 */
  padding: 0 !important;
  margin: 0 !important;
}

/* =========================================================
   본문 컨텐츠 기본 위치
   - 좌측 사이드바 2종(앱 공용 + 메일)의 폭만큼 오른쪽으로 밀고
   - 상단바 높이만큼 아래로 내림
   - (목록 화면의 고정 배치는 아래 mail-list 전용 규칙에서 재정의)
   ========================================================= */
body.mail-page #mycontent.content-wrapper {
  margin-left: calc(var(--menu-w) + var(--mail-w)) !important;
  padding-top: var(--topbar-h) !important;
  padding-left: 0 !important;
  padding-right: 0 !important;
}

/* =========================================================
   앱 공용 리사이저(있다면) 메일 화면에서는 숨김
   ========================================================= */
body.mail-page #resizer {
  display: none !important;
  width: 0 !important;
}

/* =========================================================
   메일 카드 공통 스타일
   - 카드 간 경계선/여백 최소화
   ========================================================= */
body.mail-page .mail-card {
  background: #fff;
  border: 0px solid #e9ecef;
  border-radius: .5rem;
  margin: 0 !important;        /* 외부 여백 제거 (좌우 밀착) */
  border-left: 0 !important;   /* 좌측 경계 이중선 방지 */
}
body.mail-page .mail-card .card-header {
  background: #fff;
  border-bottom: 0px solid #e9ecef;
}

/* =========================================================
   버튼/필터
   - 다우오피스 느낌의 담백한 경계 + hover
   ========================================================= */
body.mail-page .btn-soft {
  border: 1px solid #dee2e6;
  background: #fff;
}
body.mail-page .btn-soft:hover {
  background: #f8f9fa;
}
body.mail-page .mail-filter-group .btn {
  font-size: .875rem;
  padding: .375rem .6rem;
}

/* =========================================================
   폴더 리스트
   - 목록 아이템의 기본 border 제거 + hover/active 스타일
   ========================================================= */
body.mail-page .mail-folders .list-group-item {
  border: 0;
  border-radius: .375rem;
  padding: .5rem .75rem;
  font-weight: 500;
}
body.mail-page .mail-folders .list-group-item:hover {
  background: #f8f9fa;
}
body.mail-page .mail-folders .active {
  background: #e9f3ff;
  color: #0d6efd;
}

/* =========================================================
   메일 리스트 툴바(상단)
   - 제목/버튼들이 들어가는 띠 영역
   ========================================================= */
body.mail-page .mail-list-toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: .5rem .75rem;
  border-bottom: 0px solid #e9ecef;
}

/* =========================================================
   메일 테이블
   - 제목/보낸사람/날짜 등 목록 본문
   ========================================================= */
body.mail-page .mail-table {
  width: 100%;
}
body.mail-page .mail-table thead th {
  font-size: .82rem;
  font-weight: 600;
  color: #6c757d;
  border-bottom: 0px solid #e9ecef;
  white-space: nowrap;
}
body.mail-page .mail-table tbody tr {
  cursor: pointer;
}
body.mail-page .mail-table tbody tr:hover {
  background: #fcfcfd;
}
body.mail-page .mail-table td,
body.mail-page .mail-table th {
  vertical-align: middle !important;
}

/* =========================================================
   사이드바 버튼 정렬 보정
   - 메일쓰기/내게쓰기 버튼 높이/정렬 맞춤
   ========================================================= */
body.mail-page .mail-sidebar .d-flex {
  align-items: center;
}
#btnCompose,
#btnToMe {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  box-sizing: border-box;
  line-height: 1;
  height: 36px;
  padding: 0.4rem 0.6rem;
  font-size: 0.75rem;
}
/* .btn-block 사용 시 강제 폭 해제 */
#btnCompose.btn-block,
#btnToMe.btn-block {
  width: auto;
  display: inline-flex;
}

/* =========================================================
   컬럼 너비 (테이블 레이아웃 안정화)
   ========================================================= */
body.mail-page .col-chk  { width: 36px; }
body.mail-page .col-star { width: 36px; }
body.mail-page .col-read { width: 44px; }
body.mail-page .col-from { width: 18%; }
body.mail-page .col-date {
  width: 140px;
  text-align: right;
  color: #6c757d;
  font-size: .9rem;
}
/* (특정 선택자 기반 보정) */
#mycontent > div > section > div > div.table-responsive > table > thead > tr > th.col-date {
  margin-right: 5%;
}

/* =========================================================
   중요/읽음 표시 (별/파란점)
   ========================================================= */
body.mail-page .btn-star {
  border: 0;
  background: transparent;
  font-size: 1.05rem;
  line-height: 1;
  color: #adb5bd;           /* 비활성 별 색 */
}
body.mail-page .btn-star.active {
  color: #ffc107;           /* 활성(중요) 별 색 */
}
body.mail-page .read-dot {
  display: inline-block;
  width: 9px;
  height: 9px;
  border-radius: 50%;
  background: #0d6efd;      /* 안읽음: 파란점 */
}
body.mail-page .read-dot.read {
  background: transparent;  /* 읽음: 투명 + (원하면 회색테두리) */
  border: 0px solid #ced4da;
}

/* =========================================================
   제목 강조(읽지 않음일 때 bold)
   ========================================================= */
body.mail-page .subject-unread {
  font-weight: 700;
}

/* =========================================================
   휴지통(Trash) 블록 하단 고정
   - 폴더 목록은 남은 공간을 채우고, 휴지통 영역은 하단으로 밀림
   ========================================================= */
body.mail-page .mail-sidebar { display:flex; flex-direction:column; }
body.mail-page .mail-card    { display:flex; flex-direction:column; flex:1; }
body.mail-page .mail-card .card-body { display:flex; flex-direction:column; flex:1; }
body.mail-page .mail-folders { flex:1; }
body.mail-page .mail-trash   { margin-top:auto; }
body.mail-page .mail-trash hr { margin:.75rem 0; }

/* =========================================================
   반응형 처리
   ========================================================= */
@media (max-width: 1200px) {
  body.mail-page .col-from { width: 22%; }
  body.mail-page .col-date { width: 120px; }
}
@media (max-width: 992px) {
  /* 작은 화면에서는 메일 사이드바 숨김 */
  body.mail-page .mail-sidebar { display: none; }
  /* 사이드바 숨김 시 본문 좌측 여백 조정 */
  body.mail-page #mycontent.content-wrapper {
    margin-left: var(--menu-w) !important;
  }
}

/* =========================================================
   제목 링크(상세로 이동) 색상 고정
   - 파란색 링크 대신 검정 유지(visited 포함)
   ========================================================= */
body.mail-page .mail-table .col-subject a.subject-link {
  color: #212529 !important;          /* 기본(검정) */
  text-decoration: none;
}
body.mail-page .mail-table .col-subject a.subject-link:visited {
  color: #212529 !important;          /* 방문 후도 검정 유지 */
}
body.mail-page .mail-table .col-subject a.subject-link:hover {
  color: #000 !important;             /* hover 시 진한 검정 */
  text-decoration: underline;         /* 밑줄을 원치 않으면 제거 */
}

/* =========================================================
   필터 버튼 비활성화 상태(상단 3버튼)
   ========================================================= */
body.mail-page .filter-tabs .btn.disabled {
  pointer-events: none;
  opacity: .5;
}

/* =========================================================
   폴더/휴지통 active 상태 통일
   ========================================================= */
body.mail-page .mail-folders .list-group-item.active,
body.mail-page .mail-trash   .list-group-item.active {
  background: #e9f3ff;
  color: #0d6efd;
}

/* =========================================================
   휴지통 링크만 보더 제거 + hover 스타일 유지
   ========================================================= */
body.mail-page .mail-trash a.list-group-item[data-folder="trash"]{
  border: 0 !important;
  background: transparent;    /* 필요 시 배경 제거 */
}
/* hover는 기존 느낌 유지 */
body.mail-page .mail-trash a.list-group-item[data-folder="trash"]:hover{
  background: #f8f9fa;
}

/* =========================================================
   메일 목록 화면 전용: 스크롤 제거 + 상단바와 딱 붙는 고정 레이아웃
   - body에 mail-list 클래스를 함께 넣었을 때만 적용
   ========================================================= */

/* 문서/바디 높이 고정 + 페이지 스크롤 숨김 */
html,
body.mail-page.mail-list {
  height: 100%;
}
body.mail-page.mail-list {
  overflow: hidden;    /* 전체 페이지 스크롤바 제거 */
  margin: 0;
}

/* 우측 본문 패널을 뷰포트에 고정
   - 상단: 헤더 바로 아래
   - 좌측: 앱 공용 메뉴 + 메일 사이드바 폭 만큼 띄움
   - 우/하단: 0으로 꽉 채움
*/
body.mail-page.mail-list .mail-wrap section.flex-grow-1 {
  position: fixed;
  top: var(--topbar-h);
  left: calc(var(--menu-w) + var(--mail-w));
  right: 0;
  bottom: 0;
  overflow: hidden;     /* 내부 스크롤도 기본은 숨김(페이징 기준으로 높이 맞춤) */
}

/* 카드가 고정 영역을 꽉 채우도록 플렉스 구성 */
body.mail-page.mail-list .mail-card {
  height: 100%;
  display: flex;
  flex-direction: column;
  margin: 0 !important;
  border-left: 0 !important;
}
body.mail-page.mail-list .mail-list-toolbar {
  flex: 0 0 auto;       /* 상단 툴바 높이는 내용 크기만큼 */
}
body.mail-page.mail-list .table-responsive {
  flex: 1 1 auto;       /* 테이블 영역이 나머지 전체 차지 */
  min-height: unset;    /* (혹시 이전에 지정한 min-height가 있으면 무력화) */
  overflow: hidden;     /* 스크롤바 숨김 (휠 스크롤도 막음) */
}

/* 상단 공백이 #mycontent에서 오는 경우 제거 */
body.mail-page.mail-list #mycontent.content-wrapper {
  padding-top: 0 !important;
  margin-top: 0 !important;
}
