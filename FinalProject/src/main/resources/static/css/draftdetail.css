@charset "UTF-8";

/* ================== 변수 ================== */
:root{
  --topbar-h: 70px;     /* header.jsp 높이 */
  --sidebar-w: 170px;   /* 1차 사이드바 폭 */
  --sub-w: 200px;       /* 2차 사이드바 폭 */
  --gap: 8px;           /* 2차 사이드바와 본문 간격 */
  --content-pad-r: 0px;/* 본문 우측 패딩 */
  --ef-file-row-h: 34px;/* ⬅ 파일리스트 1줄 높이(2줄 = 68px) */
}

/* ================== 레이아웃 (두 사이드바 항상 표시) ================== */
/* 고정 width/margin 제거 → 두 사이드바 폭만큼 띄우고, 본문은 뷰포트 기반 유동폭 */
.main-with-sub{
  /* 레일 폭: 전체뷰포트 - (좌측 사이드바들) */
  --rail-w: calc(100vw - (var(--sidebar-w) + var(--sub-w) + var(--gap)));
  /* 컨텐츠 폭: 기존 규칙과 동일(최대 1300, 우측 패딩 고려) */
  --content-w: min(1300px, calc(var(--rail-w) - var(--content-pad-r, 0px)));

  /* 기존 속성 유지 + 변수로 치환 */
  box-sizing: border-box;
  padding-top: var(--topbar-h);
  padding-right: var(--content-pad-r, 0px);

  /* 핵심: 왼쪽 여백 = 좌측 사이드바 폭 + (레일 남는 여백의 절반) */
  margin-left: calc(
    (var(--sidebar-w) + var(--sub-w) + var(--gap))
    + (var(--rail-w) - var(--content-pad-r, 0px) - var(--content-w)) / 2
  );

  /* 실제 폭은 content-w로 고정 */
  width: var(--content-w);

  min-height: calc(100vh - var(--topbar-h));
  overflow-x: hidden;
}

/* ================== 폼 공통 ================== */
.doc-form { --ef-radius: 5px; --ef-border: #e5e7eb; --ef-bg: #fff; --ef-muted:#6b7280; --ef-ink:#111827; }

.doc-form .ef-btn{ padding:8px 14px; border-radius:10px; border:1px solid var(--ef-border); background:#fff; cursor:pointer; }
.doc-form .ef-icon-btn{ padding:6px 8px; border:1px solid var(--ef-border); background:#fff; border-radius:8px; cursor:pointer; }

.expense-form .ef-btn{ padding:8px 14px; border-radius:10px; border:1px solid var(--ef-border); background:#fff; cursor:pointer; }
.expense-form .ef-icon-btn{ padding:2px 8px ; border:1px solid var(--ef-border); background:#fff; border-radius:8px; cursor:pointer; }

.doc-form .ef-card-title{ font-weight:700; margin-bottom:10px; }
.doc-form .ef-card-title-wrap{ display:flex; justify-content:space-between; align-items:center; margin-bottom:6px; }

.doc-form .ef-form-grid{ display:grid; gap:12px; }
.doc-form .ef-2col{ grid-template-columns:1fr 1fr; }
.doc-form .ef-colspan-2{ grid-column: span 2; }

.doc-form .ef-field .ef-label{ display:block; font-size:12px; color:var(--ef-muted); margin-bottom:6px; }
.doc-form .ef-input{
  width:100%; padding:9px 10px; border:1px solid var(--ef-border); border-radius:10px; outline:none;
  background:#fff; color:var(--ef-ink);
}
.doc-form .ef-input:focus{ border-color:#111827; box-shadow:0 0 0 2px rgba(17,24,39,.08); }

.doc-form .ef-table-wrap{ width:100%; overflow:auto; border:1px solid var(--ef-border); border-radius:12px; }
.doc-form .ef-table{ width:100%; border-collapse:separate; border-spacing:0; }
.doc-form .ef-table th,
.doc-form .ef-table td{ padding:10px; border-bottom:1px solid var(--ef-border); background:#fff; }
.doc-form .ef-table thead th{ background:#f3f4f6; font-weight:600; }
.doc-form .ef-table tr:last-child td{ border-bottom:0; }
.doc-form .ta-right{ text-align:right; }

.detail-section.p-4{ padding:16px !important; }

/* 읽기전용 입력 톤 */
.doc-form input.ef-input[readonly],
.doc-form textarea.ef-input[readonly]{
  background: #f9fafb;
  color: #6b7280;
  border-color: var(--ef-border);
  caret-color: transparent;
}

/* ================== 결재라인 / 상태 뱃지 ================== */
.doc-form .ef-approvals{
  display:flex; flex-direction:column; gap:10px;
}

.doc-form .ef-approval-item{
  display:flex;
  align-items:center;
  gap:10px;
  margin-bottom:10px;
}

.status-badge{
  display:inline-block; padding:2px 8px; font-size:.75rem; font-weight:600;
  border-radius:12px; color:#fff; min-width:45px; text-align:center;
}
.status-approve{ background:#28a745; }
.status-reject { background:#dc3545; }
.status-wait   { background:#6c757d; }

.doc-form .ef-approval-comment-inline{
  flex:1;
  min-height:48px;
  background:#f8f9fa;
  border:1px solid var(--ef-border);
  border-radius:6px;
  padding:6px 10px 8px;
  font-size:.85rem; color:#444; line-height:1.35;
  word-break:break-word; white-space:pre-line;
}

/* ================== 첨부파일 ================== */
.ef-filebox{ display:flex; align-items:center; gap:16px; }
.ef-filebox input[type="file"]{ flex:0 0 260px; max-width:260px; }
.ef-file-selected{
  --ef-file-row-h: 28px;
  flex:1 1 auto; background:#f7f8fa; border:1px solid var(--ef-border);
  border-radius:10px; padding:8px 10px; min-height:40px;
  display:flex; flex-direction:column; gap:6px;
}
.ef-file-list{
  list-style:none; padding:0; margin:0;
  max-height: calc(var(--ef-file-row-h) * 2 + 6px);
  overflow-y:auto; padding-right:6px;
}
.ef-file-item{ display:flex; align-items:center; gap:10px;
  height:var(--ef-file-row-h); line-height:var(--ef-file-row-h);
  border-bottom:1px solid rgba(0,0,0,.05);
}
.ef-file-item:last-child{ border-bottom:0; }
.ef-file-link{ display:flex; align-items:center; gap:10px; text-decoration:none; }
.ef-file-name{ flex:1 1 auto; min-width:0;
  color:#111827; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.ef-file-size{ color:#6b7280; font-size:.85rem; white-space:nowrap; }
.ef-file-item.is-new .ef-file-name::after{
  content:" NEW"; font-size:.75rem; margin-left:6px; color:#2563eb;
}
.ef-file-remove{
  margin-left:auto; border:1px solid var(--ef-border); background:#fff;
  border-radius:6px; padding:2px 8px; cursor:pointer;
}
.ef-file-list::-webkit-scrollbar{ width:8px; }
.ef-file-list::-webkit-scrollbar-thumb{ background:#e5e7eb; border-radius:8px; }

/* ================== 상단 헤더 + 우측 버튼 ================== */
.page-head--with-actions{ display:flex; align-items:center; justify-content:space-between; gap:16px; }
.page-head-left{ min-width:0; }
.page-actions{ display:flex; align-items:center; gap:12px; margin-right:16px; }

.btn-action{
  padding:9px 18px;
  border-radius:20%;
  font-size:.92rem; font-weight:600;
  border:1px solid transparent;
  background:#f9fafb; color:#374151;
  text-decoration:none;
  display:inline-flex; align-items:center; gap:6px;
  cursor:pointer; transition:all .18s ease;
  box-shadow:0 2px 5px rgba(0,0,0,.06);
  line-height:1;
}
.btn-action.primary{ background:#4f46e5; color:#fff; border-color:#4f46e5; }
.btn-action.primary:hover{ background:#4338ca; border-color:#4338ca; box-shadow:0 6px 14px rgba(79,70,229,.28); transform:translateY(-1px); }
.btn-action.secondary{ background:#fff; color:#374151; border-color:#e5e7eb; }
.btn-action.secondary:hover{ background:#f3f4f6; box-shadow:0 6px 14px rgba(0,0,0,.08); transform:translateY(-1px); }

/* ================== 가로 배치 전용 행 ================== */
.ef-inline {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: nowrap;  /* 기본은 줄바꿈 방지 */
}

/* ef-inline 안에서는 100% 확장 막기 */
.ef-inline .ef-input {
  width: auto;
}

/* 보기 좋은 폭(기본) */
#startDate , #endDate{ width: 400px; }
#startHour , #endHour{ width: 150px; }

/* 의견 + 버튼을 가로 배치 */
.ef-approve-row{
  display:flex;
  align-items:flex-start;  /* 위 기준 정렬 */
  gap:12px;
}

/* 왼쪽: textarea 쪽이 넓게 */
.ef-comment-col{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:6px;
}

/* 오른쪽: 버튼 세로 두 개 */
.ef-actions-col{
  padding-top:30px;
  width: auto;        /* 원하는 폭 (조절 가능) */
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* 버튼 높이/정렬 */
.ef-actions-col .ef-btn{
  width:100%;
  height:40px;                 /* textarea 최소높이와 균형 */
  display:flex;  justify-content:center;
  border:1px solid var(--ef-border);
  border-radius:10px;
  background:#fff;
  cursor:pointer;
}
.ef-actions-col .ef-btn-approve{ 
  font-weight:600; background: #28a745;   /* 기본 녹색 */
  color: #fff;
  border-color: #28a745;
  transition: background-color 0.2s ease;}
.ef-actions-col .ef-btn-approve:hover {
  background: #218838;   /* hover 시 더 진한 녹색 */
}
.ef-actions-col .ef-btn-reject { 
  font-weight:600; 
  background: #dc3545;   /* 기본 빨강 */
  color: #fff;
  border-color: #dc3545;
  transition: background-color 0.2s ease;}
.ef-actions-col .ef-btn-reject:hover {
  background: #c82333;   /* hover 시 더 진한 빨강 */
}
/* textarea는 기존 div 스타일과 동일 */
.ef-approval-comment-textarea{
  border:1px solid var(--ef-border);
  border-radius:6px;
  padding:6px 10px 8px;
  font-size:.85rem;
  line-height:1.35;
  color:#444;
  width:100%;
  min-height:80px;
  box-sizing:border-box;
  resize:none;
}

/* ================== 반응형 (사이드바는 항상 표시) ================== */
@media (max-width: 1366px){
  /* 폼이 좁아지면 한 열로 전환 */
  .doc-form .ef-2col{ grid-template-columns: 1fr; }
  .ef-inline{ flex-wrap: wrap; }
  .ef-inline .ef-input{ width: 100%; flex: 1 1 180px; }
  #startDate, #endDate{ width: 100%; }
  #startHour, #endHour{ width: 48%; min-width: 120px; }
}

@media (max-width: 1200px){
  /* 두 사이드바는 그대로, 본문 폭은 위 clamp가 자동 처리 */
  .page-actions{ margin-right:0; }
}
